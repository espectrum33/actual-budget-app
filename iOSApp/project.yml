name: ActualAccounts
options:
  minimumXcodeGenVersion: 2.39.0
  deploymentTarget:
    iOS: "26.0"
settings:
  base:
    SWIFT_VERSION: 5.10
    # The top-level team ID can be empty
    DEVELOPMENT_TEAM: ""

targets:
  ActualAccounts:
    type: application
    platform: iOS
    configFiles:
      Debug: Resources/Version.xcconfig
      Release: Resources/Version.xcconfig
    sources:
      - path: App
      - path: Features
      - path: Networking
      - path: UI
      - path: Resources
        excludes: [README.md]
      - path: Shared
    dependencies:
      - target: SummaryWidgetExtension
    info:
      path: Resources/Info.plist
      properties:
        LSRequiresIPhoneOS: true
        UILaunchScreen: {}
        UIApplicationSceneManifest:
          UIApplicationSupportsMultipleScenes: false
        CFBundleShortVersionString: '$(MARKETING_VERSION)'
        CFBundleVersion: '$(CURRENT_PROJECT_VERSION)'
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.actual.accounts
        CODE_SIGN_STYLE: Manual
        # --- FIXED: Provide a placeholder Team ID ---
        DEVELOPMENT_TEAM: "A1B2C3D4E5"
        PROVISIONING_PROFILE_SPECIFIER: ""
        CODE_SIGN_ENTITLEMENTS: Resources/ActualAccounts.entitlements
        INFOPLIST_FILE: Resources/Info.plist
        MARKETING_VERSION: $(MARKETING_VERSION)
        CURRENT_PROJECT_VERSION: $(CURRENT_PROJECT_VERSION)

  SummaryWidgetExtension:
    type: app-extension
    platform: iOS
    configFiles:
      Debug: Resources/Version.xcconfig
      Release: Resources/Version.xcconfig
    sources:
      - path: SummaryWidget
      - path: Shared
      - path: UI
    info:
      path: SummaryWidget/Info.plist
      properties:
        NSExtension:
          NSExtensionPointIdentifier: com.apple.widgetkit-extension
        CFBundleShortVersionString: '$(MARKETING_VERSION)'
        CFBundleVersion: '$(CURRENT_PROJECT_VERSION)'
    settings:
      base:
        PRODUCT_BUNDLE_IDENTIFIER: com.actual.accounts.SummaryWidget
        CODE_SIGN_STYLE: Manual
        # --- FIXED: Provide the same placeholder Team ID ---
        DEVELOPMENT_TEAM: "A1B2C3D4E5"
        PROVISIONING_PROFILE_SPECIFIER: ""
        CODE_SIGN_ENTITLEMENTS: SummaryWidget/SummaryWidgetExtension.entitlements
        INFOPLIST_FILE: SummaryWidget/Info.plist
        APPLICATION_EXTENSION_API_ONLY: YES
        MARKETING_VERSION: $(MARKETING_VERSION)
        CURRENT_PROJECT_VERSION: $(CURRENT_PROJECT_VERSION)

